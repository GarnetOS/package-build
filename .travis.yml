dist: focal
os: linux
language: minimal
env:
  matrix:
  - PACK=aspell
  - PACK=autoconf
  - PACK=faac
  - PACK=faad2
  - PACK=libdvdnav
  - PACK=libmad
  - PACK=libnl
  - PACK=lua-5.2
  - PACK=lua
  - PACK=soundtouch
  - PACK=aspell-af
  - PACK=aspell-am
  - PACK=aspell-ar
  - PACK=aspell-ast
  - PACK=aspell-az
  - PACK=aspell-be
  - PACK=aspell-bg
  - PACK=aspell-bn
  - PACK=aspell-br
  - PACK=aspell-ca
  - PACK=aspell-cs
  - PACK=aspell-csb
  - PACK=aspell-cy
  - PACK=aspell-da
  - PACK=aspell-de
  - PACK=aspell-de-alt
  - PACK=aspell-el
  - PACK=aspell-en
  - PACK=aspell-eo
  - PACK=aspell-es
  - PACK=aspell-et
  - PACK=aspell-fa
  - PACK=aspell-fi
  - PACK=aspell-fo
  - PACK=aspell-fr
  - PACK=aspell-fy
  - PACK=aspell-ga
  - PACK=aspell-gd
  - PACK=aspell-gl
  - PACK=aspell-grc
  - PACK=aspell-gu
  - PACK=aspell-gv
  - PACK=aspell-he
  - PACK=aspell-hi
  - PACK=aspell-hil
  - PACK=aspell-hr
  - PACK=aspell-hsb
  - PACK=aspell-hu
  - PACK=aspell-hus
  - PACK=aspell-hy
  - PACK=aspell-ia
  - PACK=aspell-id
  - PACK=aspell-is
  - PACK=aspell-it
  - PACK=aspell-kn
  - PACK=aspell-ku
  - PACK=aspell-ky
  - PACK=aspell-la
  - PACK=aspell-lt
  - PACK=aspell-lv
  - PACK=aspell-mg
  - PACK=aspell-mi
  - PACK=aspell-mk
  - PACK=aspell-ml
  - PACK=aspell-mn
  - PACK=aspell-mr
  - PACK=aspell-ms
  - PACK=aspell-mt
  - PACK=aspell-nb
  - PACK=aspell-nds
  - PACK=aspell-nl
  - PACK=aspell-nn
  - PACK=aspell-ny
  - PACK=aspell-or
  - PACK=aspell-pa
  - PACK=aspell-pl
  - PACK=aspell-pt_BR
  - PACK=aspell-pt_PT
  - PACK=aspell-qu
  - PACK=aspell-ro
  - PACK=aspell-ru
  - PACK=aspell-rw
  - PACK=aspell-sc
  - PACK=aspell-sk
  - PACK=aspell-sl
  - PACK=aspell-sr
  - PACK=aspell-sv
  - PACK=aspell-sw
  - PACK=aspell-ta
  - PACK=aspell-te
  - PACK=aspell-tet
  - PACK=aspell-tk
  - PACK=aspell-tl
  - PACK=aspell-tn
  - PACK=aspell-tr
  - PACK=aspell-uk
  - PACK=aspell-uz
  - PACK=aspell-vi
  - PACK=aspell-wa
  - PACK=aspell-yi
  - PACK=aspell-zu
install:
- sudo apt update
- sudo apt install schroot debootstrap git
- wget https://github.com/cli/cli/releases/download/v1.2.0/gh_1.2.0_linux_amd64.deb
- sudo dpkg -i gh_1.2.0_linux_amd64.deb
script:
- wget https://github.com/GarnetOS/package-build/releases/download/chroot-1.1/chroot.tar.gz
- wget https://github.com/GarnetOS/package-build/releases/download/chroot-1.1/delete
- tar -xf chroot.tar.gz
- ls
- chmod +x -R ./build-scripts/
- cp -r ./build-scripts/ ./chroot
- sudo mount --bind /dev ./chroot/dev/
- travis_wait 150 sudo chroot ./chroot build-scripts/$PACK.sh
- ls
- build-scripts/empty.sh
- sudo xargs rm -r -f <delete
- sudo rm -rf ./chroot/build-scripts
- sudo rm -rf ./chroot/bin/install_deps
#- find ./chroot/
- tar -zcf $PACK -C chroot .
- mkdir out
- cp $PACK ./out/
after_script:
- bash upload.sh
- sudo rm -rf ./chroot
